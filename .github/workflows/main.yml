name: build_and_test

on: [push, pull_request]

jobs:
    windows:
        runs-on: windows-latest
        steps:
        - uses: actions/checkout@v1
        - name: test_win
          run: |
            cd tests
            test_win.cmd
    mac:
        runs-on: macos-latest
        steps:
        - uses: actions/checkout@v1
        - name: test_macos
          run: |
            cd tests
            ./test_macos.sh
    ios:
        runs-on: macos-latest
        steps:
        - uses: actions/checkout@v1
        - name: test_ios
          run: |
            cd tests
            echo "FIXME!"
    linux:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v1
        - name: prepare
          run: |
            sudo apt-get update
            sudo apt-get install libglu1-mesa-dev mesa-common-dev xorg-dev libasound-dev
        - name: test_linux
          run: |
            cd tests
            ./test_linux.sh
    emscripten:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v1
        - name: prepare
          run: |
            sudo apt-get install ninja-build
            mkdir workspace
            cd workspace
        - name: test_emscripten
          run: |
            cd tests
            echo "FIXME!"
    android:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v1
        - uses: actions/setup-java@v1
          with:
            java-version: '8'
        - name: test_android
          run: |
            cd tests
            echo "FIXME!"
    uwp:
        runs-on: windows-latest
        steps:
        - uses: actions/checkout@v1
        - name: test_uwp
          run: |
            cd tests
            test_uwp.cmd
